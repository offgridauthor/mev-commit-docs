---
title: 'L1 Validators Guide'
sidebarTitle: L1 Validators
icon: 'check-circle'
---

# Introduction

L1 validator participation in the mev-commit protocol is crucial to enforce delivery of preconfs, and add additional credibility to commitments. This guide will walk you through the process of opting-in to the mev-commit testnet as a Holesky validator. A restaking version will also be enabled in the future through Eigenlayer.

## Querying opted-in validators

Anyone can query whether a validator is opted-in to the mev-commit protocol by calling the `isStaked` function on the [validator registry contract](https://github.com/primevprotocol/contracts/pull/86).

## Determining upcoming opted-in proposers

Due to L1 proposer selection being fixed two epochs in advance, bidders can accurately predict whether the proposer for an upcoming slot will be a mev-commit opted-in validator. To query upcoming proposers from a beacon node, use the [getProposerDuties endpoint](https://ethereum.github.io/beacon-APIs/#/Validator/getProposerDuties). The returned proposer list can be cross-checked with the previously mentioned `isStaked` function to determine if a validator is opted-in to mev-commit.

The mev-commit-oracle will streamline this process by updating a list on the validator registry contract with mev-commit opted-in proposers for the latest two epochs.

# Opting-in as a validator

## Prerequisites

Before you begin, ensure you have the following:

1. An operational Holesky validator node. 
2. An operational mev-boost sidecar or equivalent.
3. Associated validator key(s).

## Requirements

By opting-in to the mev-commit protocol as a Holesky validator, you agree to the following:

* Your mev-boost client will connect ONLY to mev-commit opted in relays. The Titan Holesky relay is the only such relay at this time, see [URL here](https://docs.titanrelay.xyz/).
* 3 ether must be staked with a registry contract on the mev-commit chain for the validator account, which you can obtain from our faucet for the testnet. See below for further instructions.

## Staking with registry

To stake with the mev-commit validator registry, first use our faucet page to obtain some ether on the mev-commit chain.

_Faucet needs subdomain_

Once you've obtained ether on the mev-commit chain, you can stake it with the [validator registry contract](http://explorer.testnet.mev-commit.xyz/address/0x9938f7EfB83dd3150cF3B784CEa473D29fe7cBF0).

to `selfStake` with the contract, see the following method signature:

```solidity
function selfStake() external payable {
    require(msg.value >= minStake, "Stake amount must meet the minimum requirement");
    _stake(msg.sender, msg.value);
}
```

Alteratively, one account can opt-in multiple validators accounts via the registry's `splitStake` method.

```solidity
function splitStake(address[] calldata recipients) external payable {
    
    uint256 splitAmount = msg.value / recipients.length;
    require(splitAmount >= minStake, "Split amount must meet the minimum requirement");

    for (uint256 i = 0; i < recipients.length; i++) {
        _stake(recipients[i], splitAmount);
    }
}
```

The validator registry contract is deployed to the mev-commit chain at address `0x9938f7EfB83dd3150cF3B784CEa473D29fe7cBF0`, with a minimum stake requirement of 3 ether, and a 64 block unstaking period.

We're working on a UI for the validator registry for convenience. In the meantime you can programmatically interact with the registry via [forge script](https://book.getfoundry.sh/reference/forge/forge-script).

For example, to split 10 ether of stake for three accounts:

```solidity
pragma solidity ^0.8.15;
import "forge-std/Script.sol";
import "../contracts/ValidatorRegistry.sol";

contract SplitStake is Script {
    ValidatorRegistry private _validatorRegistry = ValidatorRegistry(0x9938f7EfB83dd3150cF3B784CEa473D29fe7cBF0);

    function run() external {

        vm.startBroadcast();
        
        address[] memory recipients = new address[](3);
        recipients[0] = address(0x3d77fE0CeB523FAa006Cd2408F6Cb34A234C4317);
        recipients[1] = address(0x7802BF57d9f5a449A879E3cF89280157846651c3);
        recipients[2] = address(0x8662a945619e31182894C641fC5bf74E7Cd75A7D);
        
        _validatorRegistry.splitStake{value: 10 ether}(recipients);

        vm.stopBroadcast();
    }
}
```

Invocation of the contract from the script would look like:

```bash
forge script "scripts/ScriptName.s.sol:SplitStake" \
    --rpc-url "https://chainrpc.testnet.mev-commit.xyz" \
    --private-key $PRIVATE_KEY \
    --broadcast \
    --chain-id 17864 \
    -vvvv \
    --use 0.8.23 \
    --via-ir \
    --priority-gas-price 2000000000 \
    --with-gas-price 5000000000
```

where gas params can be adjusted as desired.

## Withdrawing staked ether

If you wish to withdraw your staked ether, you can do so via the previously mentioned validator registry page, or using a forge script. Note an unstaking period is enforced, meaning you must first submit an `unstake` transaction, wait an appropriate amount of blocks, then submit a `withdraw` transaction, transferring funds to your account.
